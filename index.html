<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Business Profit Calculator</title>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Custom styles for profit/loss display */
    .profit-text {
      color: green;
      font-weight: bold;
    }
    .loss-text {
      color: red;
      font-weight: bold;
    }
    /* Styles for error and warning messages */
    .error-message {
      background-color: #fee2e2; /* bg-red-100 */
      border: 1px solid #fca5a5; /* border-red-400 */
      color: #b91c1c; /* text-red-700 */
      padding: 0.75rem 1rem;
      border-radius: 0.25rem;
      position: relative;
    }
    .warning-message {
      background-color: #fffbeb; /* bg-yellow-100 */
      border: 1px solid #fcd34d; /* border-yellow-400 */
      color: #b45309; /* text-yellow-700 */
      padding: 0.75rem 1rem;
      border-radius: 0.25rem;
      position: relative;
    }

    /* Mobile-specific card styles */
    .mobile-share-card {
      background-color: white;
      padding: 0.75rem;
      border-radius: 0.5rem;
      box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
      border: 1px solid #e5e7eb;
      margin-bottom: 0.75rem;
    }
    .mobile-share-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.375rem 0;
      border-bottom: 1px solid #f3f4f6;
    }
    .mobile-share-item:last-child {
      border-bottom: none;
    }
    .mobile-share-item-label {
      font-size: 0.75rem;
      font-weight: 500;
      color: #6b7280;
    }
    .mobile-share-item-value {
      font-size: 0.75rem;
      font-weight: 600;
      color: #1f2937;
    }
    .mobile-share-name {
      font-size: 0.875rem;
      font-weight: 700;
      color: #111827;
      margin-bottom: 0.5rem;
    }
    
    /* Custom flex utilities */
    .flex-2 {
      flex: 2;
    }
    
    /* Input focus styles */
    input[type="text"]:focus,
    input[type="number"]:focus {
      outline: none;
      border-color: #3b82f6; /* Blue border on focus */
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1); /* Light blue glow */
    }
    
    /* Share entry container */
    .share-entry-container {
      border: 1px solid #e5e7eb;
      border-radius: 0.5rem;
      padding: 0.5rem;
      background-color: #f9fafb;
      margin-bottom: 1rem;
    }
    
    /* Mobile layout adjustments */
    @media (max-width: 640px) {
      .share-entry {
        flex-direction: column;
        gap: 0.5rem;
      }
      .share-entry.space-x-2 > * + * {
        margin-left: 0; /* Remove horizontal spacing on mobile */
      }
      .share-entry > * {
        width: 100%;
        margin-bottom: 0;
      }
      .amount-remove-row {
        display: flex;
        gap: 0.5rem;
        width: 100%;
        margin-left: 0 !important; /* Force remove any left margin */
      }
      .amount-remove-row input {
        flex: 1;
        width: 0; /* Reset width to let flex handle it */
      }
      .amount-remove-row button {
        flex-shrink: 0;
        width: auto;
      }
      
      /* Reduce main container padding on mobile */
      .main-container {
        padding: 1rem !important;
      }
    }
  </style>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-6">
  <div class="w-full max-w-4xl bg-white shadow-lg rounded-xl p-6 space-y-6 main-container">
    <h1 class="text-2xl font-bold text-center">ğŸ“ˆ á€¡á€™á€¼á€á€ºá€„á€½á€±á€á€½á€€á€ºá€á€»á€€á€ºá€™á€¾á€¯</h1>

    <div>
      <label for="soldAmount" class="block text-sm font-medium">á€›á€±á€¬á€„á€ºá€¸á€…á€»á€±á€¸ (á€™á€¼á€”á€ºá€™á€¬á€€á€»á€•á€º)</label>
      <input id="soldAmount" type="number" class="mt-1 w-full border border-gray-300 rounded px-4 py-2" placeholder="á€¥á€•á€™á€¬ - 87700000" />
    </div>

    <div id="sharesContainer" class="space-y-4">
      <div class="share-entry-container">
        <div class="share-entry flex space-x-2">
          <input type="text" class="share-name flex-1 border border-gray-300 rounded px-2 py-1" placeholder="á€›á€¾á€šá€ºá€šá€¬á€›á€¾á€„á€ºá€¡á€™á€Šá€º" />
          <div class="amount-remove-row flex-2 flex space-x-2 sm:contents">
            <input type="number" class="share-amount flex-1 border border-gray-300 rounded px-2 py-1" placeholder="á€•á€«á€á€„á€ºá€„á€½á€±" />
            <button onclick="removeShareField(this)" class="bg-red-100 hover:bg-red-200 text-red-700 px-3 py-1 rounded text-sm flex-shrink-0">Ã—</button>
          </div>
        </div>
      </div>
    </div>

    <div class="border-t border-gray-200 pt-4">
      <button onclick="addShareField()" class="bg-blue-100 text-blue-700 px-3 py-1 rounded text-sm">+ á€›á€¾á€šá€ºá€šá€¬á€›á€¾á€„á€ºá€‘á€•á€ºá€‘á€Šá€·á€ºá€›á€”á€º</button>
    </div>

    <div class="text-center">
      <button onclick="calculateProfit()" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-6 rounded mt-4">á€á€½á€€á€ºá€á€»á€€á€ºá€•á€«</button>
    </div>

    <div id="results" class="space-y-2"></div>
  </div>

  <script>
    // Function to add a new share input field
    function addShareField() {
      const container = document.getElementById('sharesContainer');
      const div = document.createElement('div');
      div.className = 'share-entry-container';
      div.innerHTML = `
        <div class="share-entry flex space-x-2">
          <input type="text" class="share-name flex-1 border border-gray-300 rounded px-2 py-1" placeholder="á€›á€¾á€šá€ºá€šá€¬á€›á€¾á€„á€ºá€¡á€™á€Šá€º" />
          <div class="amount-remove-row flex-2 flex space-x-2 sm:contents">
            <input type="number" class="share-amount flex-1 border border-gray-300 rounded px-2 py-1" placeholder="á€•á€«á€á€„á€ºá€„á€½á€±" />
            <button onclick="removeShareField(this)" class="bg-red-100 hover:bg-red-200 text-red-700 px-3 py-1 rounded text-sm flex-shrink-0">Ã—</button>
          </div>
        </div>
      `;
      container.appendChild(div);
    }

    // Function to remove a share input field
    function removeShareField(button) {
      const container = document.getElementById('sharesContainer');
      const shareEntryContainer = button.closest('.share-entry-container');
      
      // Prevent removing the last remaining entry
      if (container.children.length > 1) {
        shareEntryContainer.remove();
      } else {
        alert('á€¡á€”á€Šá€ºá€¸á€†á€¯á€¶á€¸ á€›á€¾á€šá€ºá€šá€¬á€›á€¾á€„á€ºá€á€…á€ºá€šá€±á€¬á€€á€ºá€›á€¾á€­á€›á€™á€Šá€ºá‹');
      }
    }

    // Function to calculate profit and display results
    function calculateProfit() {
      const soldAmountInput = document.getElementById('soldAmount');
      const soldAmount = parseFloat(soldAmountInput.value);
      const entries = document.querySelectorAll('.share-entry-container');
      const resultsDiv = document.getElementById('results');

      // --- Input Validation for Sold Amount ---
      if (isNaN(soldAmount) || soldAmount <= 0) {
        resultsDiv.innerHTML = `
          <div class="error-message" role="alert">
            <strong class="font-bold">á€™á€¾á€¬á€¸á€šá€½á€„á€ºá€¸á€™á€¾á€¯!</strong>
            <span class="block sm:inline"> á€€á€»á€±á€¸á€‡á€°á€¸á€•á€¼á€¯á á€™á€¾á€”á€ºá€€á€”á€ºá€á€±á€¬ á€›á€±á€¬á€„á€ºá€¸á€…á€»á€±á€¸á€€á€­á€¯ á€‘á€Šá€·á€ºá€á€½á€„á€ºá€¸á€•á€«á‹</span>
          </div>
        `;
        soldAmountInput.classList.add('border-red-500'); // Highlight error
        return; // Stop execution if validation fails
      } else {
        soldAmountInput.classList.remove('border-red-500'); // Remove highlight if valid
      }

      let totalInvestment = 0;
      const users = [];
      let hasInvalidShareInput = false;

      entries.forEach(entry => {
        const nameInput = entry.querySelector('.share-name');
        const amountInput = entry.querySelector('.share-amount');

        const name = nameInput.value.trim() || 'á€¡á€™á€Šá€ºá€™á€á€­';
        const amount = parseFloat(amountInput.value);

        if (isNaN(amount) || amount <= 0) {
          amountInput.classList.add('border-red-500'); // Highlight error
          hasInvalidShareInput = true;
        } else {
          amountInput.classList.remove('border-red-500'); // Remove highlight if valid
          users.push({ name, amount });
          totalInvestment += amount;
        }
      });

      // --- Input Validation for Share Amounts ---
      if (hasInvalidShareInput) {
        resultsDiv.innerHTML = `
          <div class="error-message" role="alert">
            <strong class="font-bold">á€™á€¾á€¬á€¸á€šá€½á€„á€ºá€¸á€™á€¾á€¯!</strong>
            <span class="block sm:inline"> á€€á€»á€±á€¸á€‡á€°á€¸á€•á€¼á€¯á á€›á€¾á€šá€ºá€šá€¬á€›á€¾á€„á€ºá€™á€»á€¬á€¸á á€•á€«á€á€„á€ºá€„á€½á€±á€€á€­á€¯ á€™á€¾á€”á€ºá€€á€”á€ºá€…á€½á€¬ á€‘á€Šá€·á€ºá€á€½á€„á€ºá€¸á€•á€«á‹</span>
          </div>
        `;
        return;
      }

      // --- Edge Case: Zero Total Investment ---
      if (totalInvestment === 0) {
        resultsDiv.innerHTML = `
          <div class="warning-message" role="alert">
            <strong class="font-bold">á€á€á€­á€•á€¼á€¯á€›á€”á€º!</strong>
            <span class="block sm:inline"> á€€á€»á€±á€¸á€‡á€°á€¸á€•á€¼á€¯á á€•á€«á€á€„á€ºá€„á€½á€±á€™á€»á€¬á€¸á€€á€­á€¯ á€‘á€Šá€·á€ºá€á€½á€„á€ºá€¸á€•á€«á‹</span>
          </div>
        `;
        return;
      }

      const profit = soldAmount - totalInvestment;

      // --- Desktop Table HTML ---
      let desktopResultsHTML = `
        <div class="overflow-x-auto hidden sm:block">
          <table class="min-w-full table-auto border border-gray-300">
            <thead class="bg-gray-100">
              <tr>
                <th class="border px-4 py-2">á€›á€¾á€šá€ºá€šá€¬á€›á€¾á€„á€ºá€¡á€™á€Šá€º</th>
                <th class="border px-4 py-2">á€•á€«á€á€„á€ºá€„á€½á€±</th>
                <th class="border px-4 py-2">á€•á€«á€á€„á€ºá€›á€¬á€á€­á€¯á€„á€ºá€”á€¾á€¯á€”á€ºá€¸</th>
                <th class="border px-4 py-2">á€…á€¯á€…á€¯á€•á€±á€«á€„á€ºá€¸ á€•á€¼á€”á€ºá€›á€„á€½á€±</th>
                <th class="border px-4 py-2">á€¡á€™á€¼á€á€ºá€„á€½á€±</th>
              </tr>
            </thead>
            <tbody>
      `;

      users.forEach((user, index) => {
        const percent = (user.amount / totalInvestment) * 100;
        const userProfit = profit * (percent / 100);
        const totalReturn = user.amount + userProfit;

        const profitLossClass = userProfit >= 0 ? 'profit-text' : 'loss-text';
        const profitLossPrefix = userProfit >= 0 ? '' : '-';

        desktopResultsHTML += `
          <tr>
            <td class="border px-4 py-2">${user.name}</td>
            <td class="border px-4 py-2">${user.amount.toLocaleString()}</td>
            <td class="border px-4 py-2">${percent.toFixed(2)}%</td>
            <td class="border px-4 py-2">${totalReturn.toFixed(0).toLocaleString()}</td>
            <td class="border px-4 py-2 ${profitLossClass}">${profitLossPrefix}${Math.abs(userProfit).toFixed(0).toLocaleString()}</td>
          </tr>
        `;
      });
      desktopResultsHTML += '</tbody></table></div>';

      // --- Mobile List HTML ---
      let mobileResultsHTML = `
        <div class="sm:hidden space-y-3">
      `;
      users.forEach((user, index) => {
        const percent = (user.amount / totalInvestment) * 100;
        const userProfit = profit * (percent / 100);
        const totalReturn = user.amount + userProfit;

        const profitLossClass = userProfit >= 0 ? 'profit-text' : 'loss-text';
        const profitLossPrefix = userProfit >= 0 ? '' : '-';

        mobileResultsHTML += `
          <div class="mobile-share-card">
            <h3 class="mobile-share-name">${user.name}</h3>
            <div class="mobile-share-item">
              <span class="mobile-share-item-label">á€•á€«á€á€„á€ºá€„á€½á€±:</span>
              <span class="mobile-share-item-value">${user.amount.toLocaleString()} MMK</span>
            </div>
            <div class="mobile-share-item">
              <span class="mobile-share-item-label">á€•á€«á€á€„á€ºá€›á€¬á€á€­á€¯á€„á€ºá€”á€¾á€¯á€”á€ºá€¸:</span>
              <span class="mobile-share-item-value">${percent.toFixed(2)}%</span>
            </div>
            <div class="mobile-share-item">
              <span class="mobile-share-item-label">á€…á€¯á€…á€¯á€•á€±á€«á€„á€ºá€¸ á€•á€¼á€”á€ºá€›á€„á€½á€±:</span>
              <span class="mobile-share-item-value">${totalReturn.toFixed(0).toLocaleString()} MMK</span>
            </div>
            <div class="mobile-share-item">
              <span class="mobile-share-item-label">á€¡á€™á€¼á€á€ºá€„á€½á€±:</span>
              <span class="mobile-share-item-value ${profitLossClass}">${profitLossPrefix}${Math.abs(userProfit).toFixed(0).toLocaleString()} MMK</span>
            </div>
          </div>
        `;
      });
      mobileResultsHTML += '</div>';

      const overallProfitLossText = profit >= 0 ? 'á€¡á€™á€¼á€á€º' : 'á€¡á€›á€¾á€¯á€¶á€¸';
      const overallProfitLossClass = profit >= 0 ? 'profit-text' : 'loss-text';

      const summaryHTML = `
        <div class="mt-3 mobile-share-card">
          <h3 class="mobile-share-name">á€…á€¬á€›á€„á€ºá€¸á€¡á€”á€¾á€…á€ºá€á€»á€¯á€•á€º</h3>
          <div class="mobile-share-item">
            <span class="mobile-share-item-label">á€…á€¯á€…á€¯á€•á€±á€«á€„á€ºá€¸ á€•á€«á€á€„á€ºá€„á€½á€±:</span>
            <span class="mobile-share-item-value">${totalInvestment.toLocaleString()} MMK</span>
          </div>
          <div class="mobile-share-item">
            <span class="mobile-share-item-label">á€›á€±á€¬á€„á€ºá€¸á€…á€»á€±á€¸:</span>
            <span class="mobile-share-item-value">${soldAmount.toLocaleString()} MMK</span>
          </div>
          <div class="mobile-share-item">
            <span class="mobile-share-item-label">á€…á€¯á€…á€¯á€•á€±á€«á€„á€ºá€¸ ${overallProfitLossText}:</span>
            <span class="mobile-share-item-value ${overallProfitLossClass}">${Math.abs(profit).toFixed(0).toLocaleString()} MMK</span>
          </div>
        </div>
      `;

      resultsDiv.innerHTML = desktopResultsHTML + mobileResultsHTML + summaryHTML;
    }
  </script>
</body>
</html>
